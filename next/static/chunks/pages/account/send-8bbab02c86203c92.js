(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{50986:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/send",function(){return t(31599)}])},5905:function(e,n,t){"use strict";t.d(n,{F:function(){return h}});var s=t(85893),i=t(89882),a=t(65291),r=t(10191),l=t(56880),c=t(88911),d=t(23100),o=t(57386),x=t(29222),u=t(67294);function h(e){let{isOpen:n,onClose:t,onConfirm:h,info:p}=e,{network:f,recipient:j,feeRate:m,feeInBtc:g,btcValue:v}=p,C=(0,u.useRef)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i.a,{isOpen:n,leastDestructiveRef:C,onClose:t,p:"50px",children:(0,s.jsx)(a.Z,{p:"50px",children:(0,s.jsxs)(i._,{children:[(0,s.jsx)(r.x,{fontSize:"lg",fontWeight:"bold",children:"Send Bitcoin"}),(0,s.jsxs)(l.f,{children:[(0,s.jsx)(c.x,{children:"Confirm the transaction information:"}),(0,s.jsxs)(d.xu,{fontSize:"13px",mt:"10px",color:"gray.300",children:[(0,s.jsxs)(c.x,{children:["Network: ",f]}),(0,s.jsxs)(c.x,{children:["Recipient: ",j]}),(0,s.jsxs)(c.x,{children:["Sending: ",v," BTC"]}),(0,s.jsxs)(c.x,{children:["Fee Rate: ",m]}),(0,s.jsxs)(c.x,{children:["Transaction Fee: ",g," BTC"]})]})]}),(0,s.jsxs)(o.m,{children:[(0,s.jsx)(x.z,{ref:C,onClick:t,children:"Cancel"}),(0,s.jsx)(x.z,{onClick:h,ml:3,children:"Send"})]})]})})})})}},31599:function(e,n,t){"use strict";t.a(e,async function(e,s){try{t.r(n);var i=t(85893),a=t(68577),r=e([a]);a=(r.then?(await r)():r)[0];let l=()=>(0,i.jsx)(a.v,{});n.default=l,s()}catch(e){s(e)}})},68577:function(e,n,t){"use strict";t.a(e,async function(e,s){try{t.d(n,{v:function(){return I}});var i=t(85893),a=t(7335),r=t(23100),l=t(7754),c=t(88911),d=t(28129),o=t(93863),x=t(43775),u=t(204),h=t(33838),p=t(95034),f=t(29222),j=t(11163),m=t(67294),g=t(53403),v=t(37095);t(84059);var C=t(96832),S=t(77837),w=t(95542),y=t(35722),_=t(5905),z=t(30638),b=t(52636),k=e([g,y]);[g,y]=k.then?(await k)():k;let I=e=>{let{recipientInput:n,btcValueInput:t,messageInput:s}=e,k=(0,j.useRouter)(),[I,B]=(0,m.useState)(null!=n?n:""),[T,A]=(0,m.useState)(null!=t?t:""),[F,N]=(0,m.useState)(""),[O,R]=(0,m.useState)(null!=s?s:""),[E,Z]=(0,m.useState)(""),[q,L]=(0,m.useState)(),{isOpen:M,onOpen:H,onClose:J}=(0,a.q)(),[D,P]=(0,m.useState)(),U=g.Z.getCurrentAccount(),V=g.Z.getNetwork(),X=(null==U?void 0:U.address.substring(0,1))!=="b",{data:Y,isLoading:K}=(0,S.a)(["queryMempoolFee",{}],w.Q$,{refetchInterval:12e4}),Q=Y?parseInt(1.2*Y*(X?1.8:1)):void 0;(0,m.useEffect)(()=>{Q&&""===F&&N(Q)},[Q]);let{data:W,isLoading:$,isFetching:G,refetch:ee}=(0,S.a)({queryKey:["utxos",{network:V,address:null==U?void 0:U.address,confirmed:!0}],queryFn:w._q}),en=async()=>{P(!0);let e=null==U?void 0:U.ecpair;try{let{txHex:n,fee:t}=await (0,y.HB)({ecPair:e,network:V,utxos:et,toAddress:I,changeAddress:U.address,value:parseInt(T*C.kA),feeRate:F,message:O});L(n),Z(t),H()}catch(e){P(!1),(0,C.Zd)({title:e.message})}},et=W||[],es=()=>{J(),P(!1)},ei=async()=>{try{let e=await (0,w.T7)(V,q);L(null);let n=JSON.parse(await (0,z.Jt)(b.H3.ACCOUNT_ACTIVITY)||"[]");n.push({network:V,address:U.address,txId:e,date:new Date}),await (0,z.mM)(b.H3.ACCOUNT_ACTIVITY,JSON.stringify(n)),es(),k.push("/")}catch(e){(0,C.Zd)({title:e.message}),e.message.includes("conflict")&&(console.log("mempool conflict"),await ee(),en())}};return(0,i.jsxs)(r.xu,{children:[(0,i.jsx)(v.Z,{}),(0,i.jsx)(l.M,{mb:"50px",children:(0,i.jsx)(c.x,{fontSize:"15px",children:n?"Confirm Buy":"Send Bitcoin"})}),(0,i.jsx)(_.F,{isOpen:M,onClose:es,onConfirm:ei,info:{network:V,recipient:I,btcValue:T,feeRate:F,feeInBtc:E/C.kA}}),(0,i.jsx)(r.xu,{children:"Recipient Address"}),(0,i.jsx)(d.I,{mt:"5px",variant:"filled",size:"md",fontSize:"16px",placeholder:"the recipient address",value:I,disabled:n,onChange:e=>{B(e.target.value.replace(/\s\s+/g,""))}}),(0,i.jsx)(r.xu,{mt:"10px",children:"Amount of Bitcoin"}),(0,i.jsx)(d.I,{mt:"5px",variant:"filled",size:"md",placeholder:"positive decimal number",fontSize:"16px",value:T,disabled:t,onChange:e=>{A(e.target.value.replace(/[^0-9.]/g,""))}}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.xu,{mt:"10px",children:"Message (optional)"}),(0,i.jsx)(d.I,{mt:"5px",variant:"filled",size:"md",placeholder:"leave this empty by default(max: 40)",fontSize:"16px",value:O,disabled:s,onChange:e=>{R(e.target.value.substring(0,40))}})]}),(0,i.jsx)(r.xu,{mt:"10px",children:"Fee rate"}),(0,i.jsxs)(o.B,{mt:"5px",children:[(0,i.jsx)(d.I,{variant:"filled",size:"md",placeholder:"Fee rate (satoshi per vbyte)",fontSize:"16px",value:F,onChange:e=>{N(e.target.value.replace(/[^0-9.]/g,""))}}),(0,i.jsx)(x.x,{color:"gray.300",mr:"20px",children:"sat/vB"})]}),(0,i.jsx)(r.xu,{fontSize:"14px",color:"rgb(160,171,187)",children:Y?(0,i.jsxs)(u.k,{children:["Current:",(0,i.jsxs)(h.r,{onClick:()=>{window.open("https://mempool.space/")},ml:"3px",children:[Y," sat/vB"]}),(0,i.jsx)(p.L,{}),(0,i.jsxs)(c.x,{children:[" Recommended: ",Q," sat/vB"]})]}):(0,i.jsx)(c.x,{children:"Loading fee..."})}),(0,i.jsx)(l.M,{mt:"30px",children:(0,i.jsx)(f.z,{w:"100%",isLoading:$||D,onClick:()=>{en()},children:"Send"})})]})};s()}catch(e){s(e)}})}},function(e){e.O(0,[13,888,179],function(){return e(e.s=50986)}),_N_E=e.O()}]);